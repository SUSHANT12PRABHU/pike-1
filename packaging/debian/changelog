pike7.4 (7.4.35-1) unstable; urgency=medium

  * Latest CVS snapshot.
  * Disabled using the machine code in the pike bytecode. It poses a
    security risk and breaks under kernels with exec-shield or PAX.

 -- Marek Habersack <grendel@debian.org>  Thu,  4 Dec 2003 00:06:47 +0100

pike7.4 (7.4.31-1) unstable; urgency=low

  * Latest CVS snapshot
  * Dropping GNOME 1.4 support
  * The package no longer ships with the dumped pike modules
    (closes: Bug#210743)
  * pike7.4-meta now depends on pike7.4-svg as well

 -- Marek Habersack <grendel@debian.org>  Tue, 21 Oct 2003 03:07:54 +0200

pike7.4 (7.4.29-1) unstable; urgency=low

  * The latest upstream version.

 -- Marek Habersack <grendel@debian.org>  Sat, 27 Sep 2003 16:27:40 +0200

pike7.4 (7.4.27-1) unstable; urgency=high

  * Latest upstream version. The most important changes:
        * src/multiset.c: Added more tracking in the gc to help 
	  track down bugs when the gc follows munged pointers in 
	  the mark pass. Activated with GC_MARK_DEBUG.
        * src/: array.c, gc.c, gc.h, mapping.c, object.c, program.c,
	  svalue.c: Added more tracking in the gc to help track 
	  down bugs when the gc follows munged pointers in the 
	  mark pass. Activated with GC_MARK_DEBUG.
        * src/modules/Parser/: html.c, testsuite.in: Fixed a bug 
	  that could cause the parser to hang when a tag callback 
	  returned the empty string and there's a data callback 
	  registered.
  * Description fixes for the following packages:
     - pike7.4-gdbm (closes: Bug#209751)
     - pike7.4-gtk (closes: Bug#209632)
     - pike7.4-mysql (closes: Bug#209653)
     - pike7.4-gl (closes: Bug#209927)
     - pike7.4-odbc (closes: Bug#209916)
     - pike7.4-pg (closes: Bug#209744)
     - pike7.4-sane (closes: Bug#209771)
     - pike7.4-sdl (closes: Bug#210037)

 -- Marek Habersack <grendel@debian.org>  Wed, 10 Sep 2003 00:05:46 +0200

pike7.4 (7.4.25-1) unstable; urgency=low

  * Latest upstream version. The most important changes:
        * src/opcodes.c: Fixed bug in o_cast().
        * src/program.c: Fixed constant references to programs in 
	  inherited programs.
        * src/program.c, svalue.h: Added NUMBER_LOCKED kludge for
          preallocation of constants.
        * src/object.c: Safeguard against a master that breaks on init.
        * src/opcodes.c: Fixed bug in index_no_free where it returned a
          nonzero integer with zero type 1 when an element is found in a
          multiset. Caused e.g.  has_index((<1>),1) to return 0.
        * src/backend.cmod: Clear the fd flags before calling the 
          callbacks on POLLERR and POLLHUP, not afterwards. This could 
          cause nonblocking I/O to hang on fd's where errors have 
          occurred earlier. It's known to affect 
          Protocols.DNS.async_client.
        * src/las.c: Removed an overoptimization that could cause some
          casts to disappear even when they might have effect.
        * lib/modules/Protocols.pmod/HTTP.pmod/Query.pike: Forwardported
          changes in 7.2 \"Use the global functions in Protocols.DNS\".
          This means an incompatible change where the possibility to set 
          the array async_dns to an array of Protocols.DNS.async_client 
          is removed (The change was incompatible in the same way in 7.2 
	  when it was made there.)
        * src/builtin.cmod: Fixed handling of wide strings in
          String.Buffer.get_copy (and hence in _sprintf and cast).
        * src/program.c: Fixed out of range bug when comparing 
          identifiers. This could in rare cases cause identifiers to 
          "disappear" from programs.

 -- Marek Habersack <grendel@debian.org>  Fri, 29 Aug 2003 21:43:38 +0200

pike7.4 (7.4.21-5) unstable; urgency=medium

  * Rebuilt with the new GDBM.
  * Don't remove the specs file so that pike7.4 -x module works
    correctly (closes: Bug#196738)

 -- Marek Habersack <grendel@debian.org>  Thu,  5 Jun 2003 19:17:03 +0200

pike7.4 (7.4.21-4) unstable; urgency=low

  * Upload to force the recompile with correct dependencies on some
    platforms.

 -- Marek Habersack <grendel@debian.org>  Sat,  3 May 2003 22:48:14 -0400

pike7.4 (7.4.21-3) unstable; urgency=low

  * Recompiled with the LGPL mysql client library
  * Standards set to 3.5.9
  * Removed the dependency on gtkglarea - it is obsolete.

 -- Marek Habersack <grendel@debian.org>  Wed, 16 Apr 2003 23:46:03 +0200

pike7.4 (7.4.21-2) unstable; urgency=low

  * Recompiled with the new MySQL library.

 -- Marek Habersack <grendel@debian.org>  Sat, 12 Apr 2003 14:40:10 +0200

pike7.4 (7.4.21-1) unstable; urgency=low

  * Latest upstream version.
  * Added a workaround for a gcc optimizer bug on arm and m68k.

 -- Marek Habersack <grendel@debian.org>  Fri,  4 Apr 2003 18:22:38 +0200

pike7.4 (7.4.17-2) unstable; urgency=low

  * Latest update.
  * src/modules/Image/blit.c: Backported fix for nesting bug from
    Pike 7.5.
  * lib/modules/Calendar.pmod/YMD.pmod: Applied patch from Mirar to
    solve a DST problem.
  * src/post_modules/SDL/SDL.cmod: Fixed a program leak.
  * src/pike_types.c: Avoid type aliasing.

 -- Marek Habersack <grendel@debian.org>  Mon, 31 Mar 2003 19:37:35 +0200

pike7.4 (7.4.17-1) unstable; urgency=low

  * Latest upstream version.
  * Removed pike.el from the distribution. It will be moved to a separate
    package with pike goodies common for all pikes.
  * Fixed some typos in the package descriptions (closes: Bug#185507)

 -- Marek Habersack <grendel@debian.org>  Tue, 25 Mar 2003 17:45:54 +0100

pike7.4 (7.4.15-1) unstable; urgency=low

  * Latest upstream version.

 -- Marek Habersack <grendel@debian.org>  Wed, 19 Mar 2003 03:17:12 +0100

pike7.4 (7.4.13-4) unstable; urgency=low

  * Disabled the machine code generation for the sparc platform. It was
    causing segfaults.

 -- Marek Habersack <grendel@debian.org>  Wed,  5 Feb 2003 03:07:59 +0100

pike7.4 (7.4.13-3) unstable; urgency=low

  * A bug in the sparc machine code causing a segfault was fixed.

 -- Marek Habersack <grendel@debian.org>  Mon,  3 Feb 2003 15:18:40 +0100

pike7.4 (7.4.13-2) unstable; urgency=low

  * Pike is installed using the --new-style layout now.

 -- Marek Habersack <grendel@debian.org>  Mon, 27 Jan 2003 04:31:51 +0100

pike7.4 (7.4.13-1) unstable; urgency=low

  * Latest upstream version.
  * Recompiled with gcc 3.2

 -- Marek Habersack <grendel@debian.org>  Tue,  7 Jan 2003 22:55:22 +0100

pike7.4 (7.4.11-3) unstable; urgency=low

  * Recompilation to match the new Postgresql library.
  * pike.png replaced with pike.xpm in the menu entry.

 -- Marek Habersack <grendel@debian.org>  Thu,  2 Jan 2003 01:40:04 +0100

pike7.4 (7.4.11-2) unstable; urgency=low

  * Added short pike description to the meta packages' descriptions as
    well as to the doc/devel package descriptions, following the advice
    from Ben Burton. Thanks Ben. (closes: Bug#174526).
  * Added several Pike-related URLs to the README.Debian file.

 -- Marek Habersack <grendel@debian.org>  Mon, 30 Dec 2002 00:53:18 +0100

pike7.4 (7.4.11-1) unstable; urgency=low

  * Latest upstream version. Now officially released. The most important
    changes:
        * src/signal_handler.c: Fixed a race which could cause a fatal when
          several threads wait on the same process on Linux.
        * src/signal_handler.c: Made the previous fix somewhat safer
          against a busyloop if pike is compiled totally without thread
          support.
          .
          Fixed a typo that caused the linux kludge in f_pid_status_wait to
          never be activated (how could it have ever worked to wait on a
          process started by another thread on Linux??). Improved the kludge
          so that it doesn't sleep for 10 seconds between every check for the
          process kill on Linux >= 2.4.

 -- Marek Habersack <grendel@debian.org>  Fri, 20 Dec 2002 03:25:29 +0100

pike7.4 (7.4.7-1) unstable; urgency=low

  * Latest upstream version. The most important changes:
        * src/modules/spider/xml.c: Fixed a memory leak.
        * lib/modules/Stdio.pmod/module.pmod: Stdio.expand_symlinks() never
          worked for relative paths, and broke for absolute paths too a while
          ago; use System.resolvepath() where available instead, or
          System.realpath() once the patch in http://bugs.roxen.com/3317 has
          been applied.

 -- Marek Habersack <grendel@debian.org>  Wed, 18 Dec 2002 01:46:02 +0100

pike7.4 (7.4.5-1) unstable; urgency=low

  * Latest upstream version.

 -- Marek Habersack <grendel@debian.org>  Wed, 11 Dec 2002 21:03:01 +0100

pike7.4 (7.4.1-1) unstable; urgency=low

  * Latest upstream version, a release candidate.

 -- Marek Habersack <grendel@debian.org>  Fri,  6 Dec 2002 04:56:48 +0100

pike7.3 (7.3.62-1) unstable; urgency=low

  * Latest upstream version. The most important changes:
        * lib/modules/Tools.pmod/AutoDoc.pmod/DocParser.pmod: Fixed broken
          support for typedef.
        * src/modules/Gz/module.pmod.in: Now supports zlib's which lack the
          eof() function.
        * src/modules/Gz/module.pmod.in: Now behaves if zlib isn't
          available.
        * src/builtin_functions.c: Moved some debug functions to Debug.
          Updated sleep doc. Fixed describe_backtrace type.
        * src/builtin.cmod: Move _describe_program to
          Debug.describe_program.
        * src/modules/Gz/testsuite.in: Added test for Gz.File().
        * lib/modules/MIME.pmod/module.pmod: When doing guessy style MIME
          decoding, inherit the guess attribute for multipart message parts.
        * src/modules/Gz/zlibmod.c: Fixed nasty null-termination bug.
        * src/post_modules/Shuffler/Shuffler.cmod: Patched Shuffler module
          some more. This patch should fix some of the problems with the
          shuffler accessing references that have been destructed.
        * lib/modules/Filesystem.pmod/Tar.pmod: Bugfix: Since lookups are
          done with normalized paths, we need to normalize the paths in
          filename{s,_to_entry} as well to get proper matches.
        * src/pike_memory.h: Added a macro to detect whether a memory
          checker is in use, so that conflicting debug checks can be avoided.
        * lib/master.pike.in, src/svalue.c,
          lib/modules/Tools.pmod/testsuite.in: Make %O default output for
          objects and programs better.
        * lib/modules/Stdio.pmod/module.pmod, src/modules/files/file.c,
          src/modules/files/termios.c: Document the low level I/O functions
          in Stdio.File and not Fd.
          .
          Designwise motivation: Fd and Fd_ref ought to be considered
          internal; Stdio.File is the lowest "official" API level.
          .
          Practical motivation: It's _much_ easier to find the functions in
          the generated docs, despite the small pointer to Fd in Stdio.File.
        * lib/modules/Protocols.pmod/HTTP.pmod/Server.pmod/SSLPort.pike:
          added SSL support to the simple webserver. Based on SSL.https, but
          behaves exactly like Protocols.HTTP.Server.Port, except for SSL.
        * lib/master.pike.in: - Changed some search(x,y)!=-1 into
          has_value(x,y) - Optimized Getopt call by using local variables for
          NO_ARG,   MAY_HAVE_ARG and HAS_ARG.  - Optimized Getopt call by
          always having five elements per argument,   so that Getopt need not
          rewrite the array.  - Always accept the --autoreload option so that
          we are silenty  ignoring it if Pike has not autoreload (instead of
          bailing out with strange error messages (that changes depending
          on the number and   order of options)).

 -- Marek Habersack <grendel@debian.org>  Mon, 25 Nov 2002 18:43:54 +0100

pike7.3 (7.3.60-2) unstable; urgency=low

  * Latest cvs snapshot. The most important changes:
        * lib/modules/Protocols.pmod/HTTP.pmod/module.pmod: Added missing
          file argument for put_url().
        * lib/modules/Array.pmod: CHANGES says that there should be an
          Array.Iterator.  So let's have one.
        * lib/modules/Parser.pmod/XML.pmod/DOM.pmod: Added iterators, nice
          _sprintf to Nodes, and made all lfuns static.
        * src/post_modules/Shuffler/Shuffler.cmod: If the done-callback
          destroyed the shuffler object, the shuffler crashed when signaling
          that data wasn't sent thru the give_back function. This might have
          other implications but seems to work as a fix for now.

 -- Marek Habersack <grendel@debian.org>  Sat,  9 Nov 2002 19:46:43 +0100

pike7.3 (7.3.60-1) unstable; urgency=low

  * Latest upstream version. The most important changes:
        * src/code/: ppc32.c, ppc32.h: Implemented OPCODE_INLINE_BRANCH
	  interface for PPC.
        * src/dlopen.c: Some more IA64 fixes.
        * lib/modules/Protocols.pmod/HTTP.pmod/Query.pike: added the
          possibility to have array values in headers mapping to allow
          multiple headers
        * src/dlopen.c: The IA64 global offset table is now at the end of
          the datasegment, so that gp-relative offsets have a chance at
          working.
        * lib/modules/Standards.pmod/RDF.pike: Improved API and working
          N-triple parsing.
        * src/threads.c: Added a reference from MutexKey to the mutex
          object it holds, so that the latter won't be refcount garbed (which
          causes both to be destructed) if there are no other references.

 -- Marek Habersack <grendel@debian.org>  Mon,  4 Nov 2002 22:32:36 +0100

pike7.3 (7.3.58-3) unstable; urgency=low

  * Removed the sybase module as it doesn't work on Debian.

 -- Marek Habersack <grendel@debian.org>  Wed, 23 Oct 2002 02:16:53 +0200

pike7.3 (7.3.58-2) unstable; urgency=low

  * Latest CVS snapshot.

 -- Marek Habersack <grendel@debian.org>  Mon, 21 Oct 2002 03:01:06 +0200

pike7.3 (7.3.58-1) unstable; urgency=low

  * Latest upstream version. The most important changes:
        * lib/modules/Parser.pmod/XML.pmod/Tree.pmod: Better typing.
        * lib/modules/Array.pmod: Fixed a border problem in Array.sum
        * src/builtin.cmod: Fixed leak of the strings "string" and "int".
        * lib/modules/String.pmod/module.pmod: Removed the deprecated
          strmult and String_buffer (compatibility is already in place).
          Fixed a soundex bug. Made int2roman and int2size throw an error
          when input is out of range. Fixed an off by one error for the
          bytes/kb transition in int2size.
        * lib/modules/Parser.pmod/Pike.pmod: Parse binary numbers.
        * lib/modules/Standards.pmod/EXIF.pmod: Better EXIF support. Some
          API changes: get_properties only accepts Stdio.File objects.
          MN_Multi1 is renamed to MN_Multi3.
        * src/: builtin.cmod, builtin_functions.c: It's better to throw
          errors than return zero if ctime(), localtime() or gmtime() fails.
        * src/builtin.cmod: Fixed missing checks for NULL from gmtime(2),
          localtime(2) and ctime(2) which could cause segfaults. E.g. on NT
          they don't handle negative time stamps.
        * src/modules/: HTTPLoop/log.c, Oracle/oracle.c, spider/discdate.c:
          Fixed missing checks for NULL from gmtime(2), localtime(2) and
          ctime(2) which could cause segfaults. E.g. on NT they don't handle
          negative time stamps.
        * src/builtin_functions.c: Fixed missing checks for NULL from
          gmtime(2) and localtime(2) which could cause segfaults. E.g. on NT
          they don't handle negative time stamps.
        * lib/modules/Remote.pmod/connection.pike: Fixed races that could
          cause synchronous calls to hang in threaded mode.  It's still
          unclear whether a connection close is handled cleanly, though. 
          Better handling of exceptions from close callbacks.

 -- Marek Habersack <grendel@debian.org>  Fri, 18 Oct 2002 22:49:02 +0200

pike7.3 (7.3.56-2) unstable; urgency=low

  * Latest CVS snapshot.

 -- Marek Habersack <grendel@debian.org>  Fri, 18 Oct 2002 01:37:36 +0200

pike7.3 (7.3.56-1) unstable; urgency=low

  * Latest upstream version. The most important changes:
        * src/: docode.c, interpret_functions.h: Replaced the F_THROW_ZERO
          opcode used at normal exit from catch blocks with F_EXIT_CATCH,
          which uses the newer escape catch feature. This avoids a longjmp at
          the normal exit of every catch block.
          Also changed the return value for normal catch block exits to be
          UNDEFINED and not zero.
        * lib/modules/Parser.pmod/C.pmod: Added index possibility on
          tokens.
        * src/program.c: Use safe_apply_handler for calling
          get_default_module, to get better checking of the return value and
          to get correct handling of return values that are false.
          This fixes a bug in the odd recursion that involves the compat
          handler and e.g. lib/7.2/modules/__default.pmod which itself
          contains "#pike 7.2": The second time get_default_module is called
          it'll resolve an unfinished program with "__default" and thus get a
          function pointer that evaluates to false.
        * bin/pike.in, src/Makefile.in, src/builtin_functions.c,
          src/error.c: Set a breakpoint on pike_gdb_breakpoint by default
          when gdb is started. Made it accessible from pike with
          "_gdb_breakpoint" to make it convenient to enter gdb at a specific
          point in the pike code.

 -- Marek Habersack <grendel@debian.org>  Wed, 25 Sep 2002 02:47:40 +0200

pike7.3 (7.3.55-1) unstable; urgency=low

  * Latest upstream version. The most important changes:
        * src/modules/Gz/: configure.in, zlibmod.c: The Gz module now
          supports old versions of zlib again.  Most notably seek(), tell(),
          eof() and setparams() are now optionally implemented in Gz._file.
        * lib/master.pike.in: Added include_prefix.
        * src/builtin_functions.c: More information about the use and
          limits of mktime().
        * src/main.c: Now calls tzset() to initialize timezone et al.
        * lib/modules/Protocols.pmod/LDAP.pmod/client.pike: add catch to
          prevent search from bombing out when talking to active directory
          servers. this is not a good fix, as the cause seems to be referrer
          data.
          This will need to be looked at more closely, but it at least allows
          us to talk to m$ systems.
        * lib/modules/Protocols.pmod/LDAP.pmod/client.pike: fixed create()
          so that connection is actually made when SSL support is not
          present.
        * lib/master.pike.in: Added -x option to run tools from 
	  Tools.Standalone.

 -- Marek Habersack <grendel@debian.org>  Fri, 13 Sep 2002 15:44:33 +0200

pike7.3 (7.3.53-1) unstable; urgency=low

  * Latest upstream version. The most important changes:
        * src/modules/Perl/perlmod.c: Adjustment to work better with Perl
          5.8.0, plus a few minor layout changes to make the code nicer to
          read.
        * lib/modules/Local.pmod: Added support for specifying paths using
          the PIKE_LOCAL_PATH environment variable.
        * src/language.yacc: Fixed typing for intranges with bignum
          intervals.
        * lib/modules/Stdio.pmod/GZipFile.pike: Added basic support for
          reading and writing gzip files.  This is the first version and it
          is still a bit experimental.  Uses Gz._file() for lowlevel support.
        * src/modules/Gz/zlibmod.c: Added basic support for reading and
          writing gzip files.  Lowlevel functions are located in Gz._file().
        * src/builtin_functions.c: Fixed incorrect info about rusage() and
          added a bit more description about some of the items.
        * src/language.yacc: Added the "global" keyword to
          magic_identifiers so it can be used after ->.
        * src/pike_types.c: parse_type() now supports the syntax
          object(this_program), and defaults to implements mode.
        * src/modules/Postgres/: configure.in, pgres_config.h.in,
          postgres.c: this makes the Postgres module detect/work correctly
          with the PostgreSQL 7.2+

 -- Marek Habersack <grendel@debian.org>  Sun,  1 Sep 2002 00:22:22 +0200

pike7.3 (7.3.51-4) unstable; urgency=low

  * Enabled the Pike security.
  * Build-conflicts with libutahglx since the latter doesn't conform
    to the Linux OpenGL ABI
  * Added correct build dependencies for Debian/Sid

 -- Marek Habersack <grendel@debian.org>  Fri, 23 Aug 2002 02:47:22 +0200

pike7.3 (7.3.51-3) unstable; urgency=low

  * Added the -svg package.
  * Most packages now link to the -core doc directory.

 -- Marek Habersack <grendel@debian.org>  Sat, 10 Aug 2002 21:27:04 +0200

pike7.3 (7.3.51-2) unstable; urgency=low

  * The Debian packaging setup merged with the upstream sources under
    the packaging/debian/ directory.
  * Patches previously applied to the sources before generating the 
    Debian diff are now applied on the compile time.
  * Most packages depend on pikeX.Y-core now.

 -- Marek Habersack <grendel@debian.org>  Tue,  6 Aug 2002 00:36:53 +0200

pike7.3 (7.3.51-1) unstable; urgency=low

  * Latest CVS snapshot
  * the -crypto and -gz packages are merged with the core Pike package.
  * the -doc package is split into -manual and -reference and
  * The pike7.3 package became a meta package that installs a subset
    of all the Pike packages present in Debian. This subset makes up a
    recommended Pike environment for most systems.

 -- Marek Habersack <grendel@debian.org>  Wed, 31 Jul 2002 23:35:18 +0200

pike7.3 (7.3.49-2) unstable; urgency=low

  * Latest CVS snapshot

 -- Marek Habersack <grendel@debian.org>  Mon, 29 Jul 2002 10:23:44 +0200

pike7.3 (7.3.49-1) unstable; urgency=low

  * Latest CVS snapshot

 -- Marek Habersack <grendel@debian.org>  Mon, 15 Jul 2002 23:21:33 +0200

pike7.3 (7.3.47-1) unstable; urgency=low

  * Latest CVS snapshot

 -- Marek Habersack <grendel@debian.org>  Wed, 12 Jun 2002 18:13:12 +0200

pike7.3 (7.3.45-1) unstable; urgency=low

  * Latest CVS snapshot

 -- Marek Habersack <grendel@debian.org>  Fri, 17 May 2002 16:41:09 +0200

pike7.3 (7.3.41-1) unstable; urgency=low

  * Initial Release.

 -- Marek Habersack <grendel@debian.org>  Sun,  5 May 2002 01:34:05 +0200

