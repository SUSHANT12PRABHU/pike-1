
// Test define args

test_any(
#define FOO(A1, A2, A3, A4, A5, A6, A7, A8, A9, A10, dnl
A11, A12, A13, A14, A15, A16, A17, A18, A19, A20, dnl
A21, A22, A23, A24, A25, A26, A27, A28, A29, A30, dnl
A31, A32, A33, A34, A35, A36, A37, A38, A39, A40, dnl
A41, A42, A43, A44, A45, A46, A47, A48, A49, A50, dnl
A51, A52, A53, A54, A55, A56, A57, A58, A59, A60, dnl
A61, A62, A63, A64, A65, A66, A67, A68, A69, A70, dnl
A71, A72, A73, A74, A75, A76, A77, A78, A79, A80, dnl
A81, A82, A83, A84, A85, A86, A87, A88, A89, A90, dnl
A91, A92, A93, A94, A95, A96, A97, A98, A99, A100, dnl
A101, A102, A103, A104, A105, A106, A107, A108, A109, A110, dnl
A111, A112, A113, A114, A115, A116, A117, A118, A119, A120, dnl
A121, A122, A123, A124, A125, A126, A127, A128, A129, A130, dnl
A131, A132, A133, A134, A135, A136, A137, A138, A139, A140, dnl
A141, A142, A143, A144, A145, A146, A147, A148, A149, A150, dnl
A151, A152, A153, A154, A155, A156, A157, A158, A159, A160, dnl
A161, A162, A163, A164, A165, A166, A167, A168, A169, A170, dnl
A171, A172, A173, A174, A175, A176, A177, A178, A179, A180, dnl
A181, A182, A183, A184, A185, A186, A187, A188, A189, A190, dnl
A191, A192, A193, A194, A195, A196, A197, A198, A199, A200, dnl
A201, A202, A203, A204, A205, A206, A207, A208, A209, A210, dnl
A211, A212, A213, A214, A215, A216, A217, A218, A219, A220, dnl
A221, A222, A223, A224, A225, A226, A227, A228, A229, A230, dnl
A231, A232, A233, A234, A235, A236, A237, A238, A239, A240, dnl
A241, A242, A243, A244, A245, A246, A247, A248, A249, A250, dnl
A251, A252, A253, A254) A1+A2+A3+A4+A5+A6+A7+A8+A9+A10+dnl
A11+A12+A13+A14+A15+A16+A17+A18+A19+A20+dnl
A21+A22+A23+A24+A25+A26+A27+A28+A29+A30+dnl
A31+A32+A33+A34+A35+A36+A37+A38+A39+A40+dnl
A41+A42+A43+A44+A45+A46+A47+A48+A49+A50+dnl
A51+A52+A53+A54+A55+A56+A57+A58+A59+A60+dnl
A61+A62+A63+A64+A65+A66+A67+A68+A69+A70+dnl
A71+A72+A73+A74+A75+A76+A77+A78+A79+A80+dnl
A81+A82+A83+A84+A85+A86+A87+A88+A89+A90+dnl
A91+A92+A93+A94+A95+A96+A97+A98+A99+A100+dnl
A101+A102+A103+A104+A105+A106+A107+A108+A109+A110+dnl
A111+A112+A113+A114+A115+A116+A117+A118+A119+A120+dnl
A121+A122+A123+A124+A125+A126+A127+A128+A129+A130+dnl
A131+A132+A133+A134+A135+A136+A137+A138+A139+A140+dnl
A141+A142+A143+A144+A145+A146+A147+A148+A149+A150+dnl
A151+A152+A153+A154+A155+A156+A157+A158+A159+A160+dnl
A161+A162+A163+A164+A165+A166+A167+A168+A169+A170+dnl
A171+A172+A173+A174+A175+A176+A177+A178+A179+A180+dnl
A181+A182+A183+A184+A185+A186+A187+A188+A189+A190+dnl
A191+A192+A193+A194+A195+A196+A197+A198+A199+A200+dnl
A201+A202+A203+A204+A205+A206+A207+A208+A209+A210+dnl
A211+A212+A213+A214+A215+A216+A217+A218+A219+A220+dnl
A221+A222+A223+A224+A225+A226+A227+A228+A229+A230+dnl
A231+A232+A233+A234+A235+A236+A237+A238+A239+A240+dnl
A241+A242+A243+A244+A245+A246+A247+A248+A249+A250+dnl
A251+A252+A253+A254

return FOO(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,
18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,
36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,
54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,
72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,
90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,
106,107,108,109,110,111,112,113,114,115,116,117,118,
119,120,121,122,123,124,125,126,127,128,129,130,131,
132,133,134,135,136,137,138,139,140,141,142,143,144,
145,146,147,148,149,150,151,152,153,154,155,156,157,
158,159,160,161,162,163,164,165,166,167,168,169,170,
171,172,173,174,175,176,177,178,179,180,181,182,183,
184,185,186,187,188,189,190,191,192,193,194,195,196,
197,198,199,200,201,202,203,204,205,206,207,208,209,
210,211,212,213,214,215,216,217,218,219,220,221,222,
223,224,225,226,227,228,229,230,231,232,233,234,235,
236,237,238,239,240,241,242,243,244,245,246,247,248,
249,250,251,252,253,254);
, 32385)

test_compile_error(
#define FOO(A1, A2, A3, A4, A5, A6, A7, A8, A9, A10, dnl
A11, A12, A13, A14, A15, A16, A17, A18, A19, A20, dnl
A21, A22, A23, A24, A25, A26, A27, A28, A29, A30, dnl
A31, A32, A33, A34, A35, A36, A37, A38, A39, A40, dnl
A41, A42, A43, A44, A45, A46, A47, A48, A49, A50, dnl
A51, A52, A53, A54, A55, A56, A57, A58, A59, A60, dnl
A61, A62, A63, A64, A65, A66, A67, A68, A69, A70, dnl
A71, A72, A73, A74, A75, A76, A77, A78, A79, A80, dnl
A81, A82, A83, A84, A85, A86, A87, A88, A89, A90, dnl
A91, A92, A93, A94, A95, A96, A97, A98, A99, A100, dnl
A101, A102, A103, A104, A105, A106, A107, A108, A109, A110, dnl
A111, A112, A113, A114, A115, A116, A117, A118, A119, A120, dnl
A121, A122, A123, A124, A125, A126, A127, A128, A129, A130, dnl
A131, A132, A133, A134, A135, A136, A137, A138, A139, A140, dnl
A141, A142, A143, A144, A145, A146, A147, A148, A149, A150, dnl
A151, A152, A153, A154, A155, A156, A157, A158, A159, A160, dnl
A161, A162, A163, A164, A165, A166, A167, A168, A169, A170, dnl
A171, A172, A173, A174, A175, A176, A177, A178, A179, A180, dnl
A181, A182, A183, A184, A185, A186, A187, A188, A189, A190, dnl
A191, A192, A193, A194, A195, A196, A197, A198, A199, A200, dnl
A201, A202, A203, A204, A205, A206, A207, A208, A209, A210, dnl
A211, A212, A213, A214, A215, A216, A217, A218, A219, A220, dnl
A221, A222, A223, A224, A225, A226, A227, A228, A229, A230, dnl
A231, A232, A233, A234, A235, A236, A237, A238, A239, A240, dnl
A241, A242, A243, A244, A245, A246, A247, A248, A249, A250, dnl
A251, A252, A253, A254, A255) A1+A2+A3+A4+A5+A6+A7+A8+A9+A10+dnl
A11+A12+A13+A14+A15+A16+A17+A18+A19+A20+dnl
A21+A22+A23+A24+A25+A26+A27+A28+A29+A30+dnl
A31+A32+A33+A34+A35+A36+A37+A38+A39+A40+dnl
A41+A42+A43+A44+A45+A46+A47+A48+A49+A50+dnl
A51+A52+A53+A54+A55+A56+A57+A58+A59+A60+dnl
A61+A62+A63+A64+A65+A66+A67+A68+A69+A70+dnl
A71+A72+A73+A74+A75+A76+A77+A78+A79+A80+dnl
A81+A82+A83+A84+A85+A86+A87+A88+A89+A90+dnl
A91+A92+A93+A94+A95+A96+A97+A98+A99+A100+dnl
A101+A102+A103+A104+A105+A106+A107+A108+A109+A110+dnl
A111+A112+A113+A114+A115+A116+A117+A118+A119+A120+dnl
A121+A122+A123+A124+A125+A126+A127+A128+A129+A130+dnl
A131+A132+A133+A134+A135+A136+A137+A138+A139+A140+dnl
A141+A142+A143+A144+A145+A146+A147+A148+A149+A150+dnl
A151+A152+A153+A154+A155+A156+A157+A158+A159+A160+dnl
A161+A162+A163+A164+A165+A166+A167+A168+A169+A170+dnl
A171+A172+A173+A174+A175+A176+A177+A178+A179+A180+dnl
A181+A182+A183+A184+A185+A186+A187+A188+A189+A190+dnl
A191+A192+A193+A194+A195+A196+A197+A198+A199+A200+dnl
A201+A202+A203+A204+A205+A206+A207+A208+A209+A210+dnl
A211+A212+A213+A214+A215+A216+A217+A218+A219+A220+dnl
A221+A222+A223+A224+A225+A226+A227+A228+A229+A230+dnl
A231+A232+A233+A234+A235+A236+A237+A238+A239+A240+dnl
A241+A242+A243+A244+A245+A246+A247+A248+A249+A250+dnl
A251+A252+A253+A254+A255

return FOO(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,
18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,
36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,
54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,
72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,
90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,
106,107,108,109,110,111,112,113,114,115,116,117,118,
119,120,121,122,123,124,125,126,127,128,129,130,131,
132,133,134,135,136,137,138,139,140,141,142,143,144,
145,146,147,148,149,150,151,152,153,154,155,156,157,
158,159,160,161,162,163,164,165,166,167,168,169,170,
171,172,173,174,175,176,177,178,179,180,181,182,183,
184,185,186,187,188,189,190,191,192,193,194,195,196,
197,198,199,200,201,202,203,204,205,206,207,208,209,
210,211,212,213,214,215,216,217,218,219,220,221,222,
223,224,225,226,227,228,229,230,231,232,233,234,235,
236,237,238,239,240,241,242,243,244,245,246,247,248,
249,250,251,252,253,254,255);
)

// Test the limit of identifiers.

test_any([[
  String.Buffer b = String.Buffer();
  for(int i; i<65534; i++)
    b->add("int i", (string)i, ";\n");
  return sizeof(indices(compile_string( (string)b )()));
]], 65534);

test_eval_error([[
  String.Buffer b = String.Buffer();
  for(int i; i<65535; i++)
    b->add("int i", (string)i, ";\n");
  compile_string( (string)b );
]])
